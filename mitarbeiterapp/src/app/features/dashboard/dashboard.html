<!-- Floating Navbar für die wichtigsten Bereiche -->
<nav
  class="fixed bottom-4 left-1/2 -translate-x-1/2 z-50 flex flex-row gap-8 bg-white/80 backdrop-blur-xl rounded-2xl shadow-lg px-8 py-4 border border-gray-200"
>
  <button
    class="flex flex-col items-center justify-center rounded-full transition hover:bg-blue-50 shadow-md px-3 py-2"
    (click)="openTimesheet()"
  >
    <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="#2563eb" stroke-width="2">
      <rect x="3" y="4" width="18" height="18" rx="2" />
      <line x1="16" y1="2" x2="16" y2="6" />
      <line x1="8" y1="2" x2="8" y2="6" />
      <line x1="3" y1="10" x2="21" y2="10" />
      <line x1="8" y1="14" x2="16" y2="14" />
      <line x1="8" y1="18" x2="14" y2="18" />
    </svg>
    <span class="text-xs mt-2 text-blue-700 font-medium">Stundennachweis</span>
  </button>
  <button
    class="flex flex-col items-center justify-center rounded-full transition hover:bg-blue-50 shadow-md px-3 py-2"
    (click)="showSickLeaveModal.set(true)"
  >
    <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="#2563eb" stroke-width="2">
      <path d="M22 12h-4l-3 9L9 3l-3 9H2" />
    </svg>
    <span class="text-xs mt-2 text-blue-700 font-medium">Krankmeldung</span>
  </button>
  <button
    class="flex flex-col items-center justify-center rounded-full transition hover:bg-blue-50 shadow-md px-3 py-2"
    (click)="showVacationModal.set(true)"
  >
    <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="#2563eb" stroke-width="2">
      <circle cx="12" cy="12" r="10" />
      <path d="M12 2v20" />
      <path d="M2 12h20" />
      <path d="M12 2C9.5 4 8 7.5 8 12s1.5 8 4 10" />
      <path d="M12 2c2.5 2 4 5.5 4 10s-1.5 8-4 10" />
    </svg>
    <span class="text-xs mt-2 text-blue-700 font-medium">Urlaubsantrag</span>
  </button>
</nav>
<!-- Header ganz oben -->
<header class="flex flex-row items-start justify-between px-8 pt-8 pb-4 relative">
  <div class="flex flex-col gap-2">
    <div class="flex flex-row items-center gap-4">
      <img src="assets/logo-westfalia.png" alt="Logo" class="w-24 h-24 object-contain" />
      <div class="flex flex-row items-center gap-2">
        <div
          class="w-3 h-3 rounded-full"
          [ngClass]="isOnline() ? 'bg-green-400' : 'bg-red-400'"
        ></div>
        <span class="text-sm font-medium text-gray-700">
          {{ isOnline() ? ('status.online' | translate) : ('status.offline' | translate) }}
        </span>
      </div>
    </div>
    <div class="mt-2">
      <h1 class="text-xl font-semibold text-gray-800">
        {{ 'dashboard.welcome' | translate }}, {{ userName }}
      </h1>
      <p class="text-sm text-gray-500">{{ currentDate | date : 'fullDate' }}</p>
    </div>
  </div>
  <button
    class="absolute top-8 right-8 bg-white/70 backdrop-blur-lg rounded-full shadow-lg w-12 h-12 flex items-center justify-center hover:bg-blue-50 transition"
    (click)="onLogout()"
    [title]="'actions.logout' | translate"
  >
    <svg
      width="28"
      height="28"
      viewBox="0 0 24 24"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
    >
      <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4" />
      <polyline points="16 17 21 12 16 7" />
      <line x1="21" y1="12" x2="9" y2="12" />
    </svg>
  </button>
</header>

<!-- Dashboard-Kacheln außer den drei wichtigsten -->
<div
  class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-8 w-full max-w-6xl px-8 py-8"
>
  @for (tile of tiles; track tile.id) { @if (tile.id !== 'timesheet' && tile.id !== 'sickLeave' &&
  tile.id !== 'vacation') {
  <button
    class="relative flex flex-col items-center justify-center p-8 bg-white/60 backdrop-blur-xl rounded-2xl border border-gray-200 shadow-lg transition hover:bg-white/80 disabled:opacity-40 disabled:cursor-not-allowed"
    [ngClass]="!tile.enabled ? 'opacity-40 cursor-not-allowed' : ''"
    (click)="onTileClick(tile)"
    [disabled]="!tile.enabled"
  >
    <div class="flex items-center justify-center w-14 h-14 rounded-xl bg-gray-100 mb-4">
      <!-- Icon-Rendering wie zuvor -->
      @switch (tile.id) { @case ('weekOverview') {
      <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="#2563eb" stroke-width="2">
        <rect x="3" y="4" width="18" height="18" rx="2" />
        <line x1="16" y1="2" x2="16" y2="6" />
        <line x1="8" y1="2" x2="8" y2="6" />
        <line x1="3" y1="10" x2="21" y2="10" />
      </svg>
      } @case ('monthOverview') {
      <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="#2563eb" stroke-width="2">
        <line x1="12" y1="20" x2="12" y2="10" />
        <line x1="18" y1="20" x2="18" y2="4" />
        <line x1="6" y1="20" x2="6" y2="16" />
      </svg>
      } @case ('history') {
      <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="#2563eb" stroke-width="2">
        <circle cx="12" cy="12" r="10" />
        <polyline points="12 6 12 12 16 14" />
      </svg>
      } @case ('contact') {
      <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="#2563eb" stroke-width="2">
        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" />
        <circle cx="12" cy="7" r="4" />
      </svg>
      } @case ('upload') {
      <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="#2563eb" stroke-width="2">
        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
        <polyline points="17 8 12 3 7 8" />
        <line x1="12" y1="3" x2="12" y2="15" />
      </svg>
      } @case ('help') {
      <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="#2563eb" stroke-width="2">
        <circle cx="12" cy="12" r="10" />
        <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3" />
        <line x1="12" y1="17" x2="12.01" y2="17" />
      </svg>
      } @case ('language') {
      <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="#2563eb" stroke-width="2">
        <circle cx="12" cy="12" r="10" />
        <line x1="2" y1="12" x2="22" y2="12" />
        <path
          d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"
        />
      </svg>
      } @default {
      <!-- Kein Icon -->
      } }
    </div>
    <h3 class="text-base font-medium text-gray-800 mb-2">{{ tile.titleKey | translate }}</h3>
    @if (!tile.enabled) {
    <span
      class="absolute top-3 right-3 px-3 py-1 bg-white/80 text-xs text-gray-400 rounded-lg border border-gray-200"
      >{{ 'dashboard.comingSoon' | translate }}</span
    >
    }
  </button>
  } }
</div>
<!-- Krankmeldung Modal -->
@if (showSickLeaveModal()) {
<app-sick-leave-modal (close)="showSickLeaveModal.set(false)" />
}

<!-- Urlaubsantrag Modal -->
@if (showVacationModal()) {
<app-vacation-modal (close)="showVacationModal.set(false)" />
}
<!-- Week Overview Modal -->
@if (showWeekOverviewModal()) {
<app-week-overview-modal (close)="closeModal('weekOverview')" />
}

<!-- Month Overview Modal -->
@if (showMonthOverviewModal()) {
<app-month-overview-modal (close)="closeModal('monthOverview')" />
}

<!-- History Modal -->
@if (showHistoryModal()) {
<app-history-modal (close)="closeModal('history')" />
}

<!-- Contact Modal -->
@if (showContactModal()) {
<app-contact-modal (close)="closeModal('contact')" />
}

<!-- Upload Modal -->
@if (showUploadModal()) {
<app-upload-modal (close)="closeModal('upload')" />
}

<!-- Help Modal -->
@if (showHelpModal()) {
<app-help-modal (close)="closeModal('help')" />
}

<!-- Language Modal -->
@if (showLanguageModal()) {
<app-language-modal (close)="closeModal('language')" (languageChange)="onLanguageChange($event)" />
}
<!-- End of dashboard.html -->
